<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Practice</title>
    <style>
body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #141010;
    color: white;
    font-family: Arial, sans-serif;
    flex-direction: column;
    text-align: center;
    position: relative;
}

.stats-container {
    position: absolute;
    top: 80px;
    right: 100px;
    font-size: 18px;
    background: rgba(0, 0, 0, 0.6);
    padding: 10px 15px;
    border-radius: 8px;
}

.controls {
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
}

select {
    padding: 8px 15px;
    border: 2px solid #5a189a;
    border-radius: 5px;
    background-color: #240046;
    color: white;
    font-size: 16px;
    cursor: pointer;
    outline: none;
}

select:hover {
    background-color: #3c096c;
}

button {
    padding: 8px 20px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    background-color: #7b2cbf;
    color: white;
    cursor: pointer;
    transition: 0.3s;
}

button:hover {
    background-color: #9d4edd;
}

.input-container {
    position: relative;
    width: 100vw;
    max-width: 3000px;
    height: 50vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

.background-text {
    position: absolute;
    width: 100%;
    height: 100%;
    font-size: 22px;
    padding: 20px;
    color: rgba(255, 255, 255, 0.3);
    white-space: pre-wrap;
    word-wrap: break-word;
    text-align: left;
    font-family: inherit;
    line-height: 1.5;
    z-index: 1;
}

.input-box {
    position: absolute;
    width: 100%;
    height: 100%;
    font-size: 22px;
    padding: 20px;
    border: none;
    background: transparent;
    color: transparent;
    outline: none;
    resize: none;
    z-index: 2;
    caret-color: white;
    text-align: left;
    font-family: inherit;
    line-height: 1.5;
}

.correct {
    color: white;
}

.incorrect {
    color: red;
}

#popup-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    z-index: 1000;
}

.popup-content h2 {
    margin: 0 0 10px;
}

.popup-content p {
    margin: 5px 0;
}

#close-popup {
    margin-top: 10px;
    padding: 8px 20px;
    border: none;
    border-radius: 5px;
    background-color: #7b2cbf;
    color: white;
    cursor: pointer;
    transition: 0.3s;
}

#close-popup:hover {
    background-color: #9d4edd;
}

/* Heading Styling */
.heading {
    font-size: 28px;
    font-weight: bold;
    color: white;
    margin-top: 40px;
    margin-bottom: 20px;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 2px;
    padding: 10px 0;
}

/* Footer Styling */
#footer-container {
    width: 100%;
    margin-bottom: 100px;
}

footer {
    background-color: rgba(128, 128, 128, 0.5);
    color: black;
    text-align: center;
    padding: 15px;
    position: fixed;
    bottom: 0;
    left: -20px;
    width: 100%;
    opacity: 0;
    backdrop-filter: blur(8px);
    font-size: 16px;
    transition: opacity 0.5s ease-in-out;
}
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil&display=swap');
body {
    font-family: 'Noto Sans Tamil', sans-serif;
}
@media (max-width: 768px) {
    /* Body & General Layout */
    body, html {
        padding: 10px;
        height: auto;
        justify-content: flex-start; /* Allow scrolling */
        font-size: 14px; /* Reduce font size for smaller screens */
    }

    /* Stats Container */
    .stats-container {
        position: static; /* Remove absolute positioning */
        top: 0;
        right: 0;
        font-size: 14px;
        padding: 8px 12px;
        margin-top: 10px;
        background: rgba(0, 0, 0, 0.6);
        border-radius: 6px;
    }

    /* Controls */
    .controls {
        flex-direction: column; /* Stack items vertically */
        gap: 8px;
    }

    select, button {
        width: 100%; /* Make buttons and select full-width */
        padding: 10px 15px;
        font-size: 14px;
        margin: 5px 0;
    }

    /* Input Container */
    .input-container {
        width: 100%;
        height: 40vh; /* Adjust height for smaller screens */
        max-width: 100%;
    }

    .background-text, .input-box {
        font-size: 18px; /* Adjust font size */
        padding: 15px;
    }

    /* Heading */
    .heading {
        font-size: 24px;
        margin-top: 20px;
        margin-bottom: 15px;
    }

    /* Popup */
    #popup-message {
        width: 90%;
        padding: 15px;
    }

    /* Footer */
    footer {
        font-size: 14px;
        padding: 10px;
        opacity: 1;
    }

    .popup-content h2 {
        font-size: 18px;
    }

    .popup-content p {
        font-size: 14px;
    }

    #close-popup {
        padding: 8px 15px;
    }
}

    </style>
</head>
<body>
     <!-- Help Button -->
<button class="faq-button" onclick="showHelp()">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
        <path d="M80 160c0-35.3 28.7-64 64-64h32c35.3 0 64 28.7 64 64v3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74V320c0 17.7 14.3 32 32 32s32-14.3 32-32v-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7V160c0-70.7-57.3-128-128-128H144C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"></path>
    </svg>
    <span class="tooltip">Need help</span>
</button>

<!-- Overlay -->
<div id="overlay" onclick="hideHelp()"></div>

<!-- Help Image Modal -->
<div id="helpImage" onclick="event.stopPropagation()">
    <button class="close-btn" onclick="hideHelp()">X</button>
    <img src="http://ka-naada.in/wp-content/uploads/2025/04/sticker1.jpg" alt="logo" style="width: 100%;">
</div>


    <!-- Load Header Here -->
    <div id="header-container"></div>
    <div class="stats-container">
        <div id="timer-display">Time: 0s</div>
    </div>
    
    <div class="controls">
        <select id="timer-select">
            <option value="120">2 min</option>
            <option value="60">1 min</option>
            <option value="40">40 sec</option>
        </select>
        
        <button id="start-button">Start</button>
    </div>

    <div class="input-container">
        <div id="background-text" class="background-text"></div>
        <textarea id="typing-input" class="input-box"></textarea>

    </div>

    <!-- Footer Container -->
    <div id="footer-container"></div>
    <script>
         // Function to Load External HTML Files
         function loadComponent(elementId, filePath) {
            fetch(filePath)
                .then(response => response.text())
                .then(data => {
                    document.getElementById(elementId).innerHTML = data;
                })
                .catch(error => console.error('Error loading component:', error));
        }

        // Load header.html and footer.html
        loadComponent("header-container", "header.html");
        loadComponent("footer-container", "footer.html");

        // Footer Scroll Effect
        let lastScrollY = window.scrollY;
        
        window.addEventListener("scroll", function () {
            let footer = document.querySelector("footer");
            let currentScrollY = window.scrollY;

            if (currentScrollY > lastScrollY) {  
                // Show footer when scrolling down
                footer.style.opacity = "1";
            } else {  
                // Hide footer when scrolling up
                footer.style.opacity = "0";
            }

            lastScrollY = currentScrollY;
        });

        // Show footer after 2 seconds on page load
        setTimeout(() => {
            let footer = document.querySelector("footer");
            if (footer) {
                footer.style.opacity = "1";
            }
        }, 1000);

        function showHelp() {
            document.getElementById("helpImage").style.display = "block";
            document.getElementById("overlay").style.display = "block";
        }

        function hideHelp() {
            document.getElementById("helpImage").style.display = "none";
            document.getElementById("overlay").style.display = "none";
        }
        const paragraphs = [
    "à®šà¯‚à®°à®¿à®¯à®©à¯ à®®à®²à¯ˆà®•à®³à®¿à®©à¯ à®ªà®¿à®©à¯à®©à®¾à®²à¯ à®®à®±à¯ˆà®¯à¯à®®à¯ à®ªà¯‹à®¤à¯, à®šà®®à®µà¯†à®³à®¿à®¯à®¿à®²à¯ à®…à®´à®•à®¾à®© à®ªà¯Šà®©à¯à®©à®¿à®± à®’à®³à®¿ à®ªà®°à®µà®¿à®¯à®¤à¯. à®ªà®±à®µà¯ˆà®•à®³à¯ à®…à®µà®±à¯à®±à®¿à®©à¯ à®‡à®±à¯à®¤à®¿à®ªà¯ à®ªà®¾à®Ÿà®²à¯à®•à®³à¯ˆ à®ªà®¾à®Ÿà®¿à®•à¯à®•à¯Šà®£à¯à®Ÿà®¿à®°à¯à®¨à¯à®¤à®©, à®®à¯‡à®²à¯à®®à¯ à®¤à¯†à®©à¯à®±à®²à¯ à®•à®¾à®±à¯à®±à¯ à®®à®°à®™à¯à®•à®³à®¿à®©à¯ à®‡à®²à¯ˆà®•à®³à¯ˆ à®®à¯†à®¤à¯à®µà®¾à®• à®…à®šà¯ˆà®¤à¯à®¤à®¤à¯. à®‡à®¤à¯ à®’à®°à¯ à®…à®®à¯ˆà®¤à®¿à®¯à®¾à®© à®®à®¾à®²à¯ˆ à®¨à¯‡à®°à®®à®¾à®• à®‡à®°à¯à®¨à¯à®¤à®¤à¯, à®‡à®¯à®±à¯à®•à¯ˆà®¯à®¿à®©à¯ à®…à®´à®•à¯ˆ à®°à®šà®¿à®•à¯à®• à®’à®°à¯ à®šà®¿à®±à®¨à¯à®¤ à®¤à®°à¯à®£à®®à¯. à®µà®¾à®©à®®à¯ à®šà®¿à®µà®ªà¯à®ªà¯ à®®à®±à¯à®±à¯à®®à¯ à®•à¯‡à®´à¯à®µà®°à®•à¯ à®¨à®¿à®±à®®à®¾à®• à®®à®¾à®±à®¿à®¯à®¤à¯, à®®à®±à¯à®±à¯à®®à¯ à®…à®®à¯ˆà®¤à®¿à®¯à®¿à®©à¯ à®‰à®£à®°à¯à®µà¯ à®®à¯à®´à¯ à®ªà®¿à®°à®ªà®žà¯à®šà®¤à¯à®¤à®¿à®²à¯à®®à¯ à®ªà®°à®µà®¿à®¯à®¤à¯.",

    "à®¤à¯Šà®´à®¿à®²à¯à®¨à¯à®Ÿà¯à®ªà®®à¯ à®Žà®™à¯à®•à®³à¯ à®µà®¾à®´à¯à®•à¯à®•à¯ˆà®¯à¯ˆ à®®à®±à¯à®±à¯à®®à¯ à®‰à®²à®•à®¤à¯à®¤à¯à®Ÿà®©à¯ à®¤à¯Šà®Ÿà®°à¯à®ªà¯ à®•à¯Šà®³à¯à®³à¯à®®à¯ à®®à¯à®±à¯ˆà®¯à¯ˆ à®®à®¾à®±à¯à®±à®¿à®¯à¯à®³à¯à®³à®¤à¯. à®¸à¯à®®à®¾à®°à¯à®Ÿà¯à®ªà¯‹à®©à¯à®•à®³à®¿à®²à®¿à®°à¯à®¨à¯à®¤à¯ à®šà¯†à®¯à®±à¯à®•à¯ˆ à®¨à¯à®£à¯à®£à®±à®¿à®µà¯à®•à¯à®•à¯ à®µà®°à¯ˆ, à®ªà¯à®¤à¯à®®à¯ˆà®•à®³à¯ à®Žà®™à¯à®•à®³à¯ à®¤à®¿à®©à®šà®°à®¿ à®µà®¾à®´à¯à®µà¯ˆ à®¨à®¿à®°à¯à®£à®¯à®¿à®•à¯à®•à®¿à®©à¯à®±à®©. à®‰à®²à®•à®®à¯†à®™à¯à®•à¯à®®à¯ à®‰à®³à¯à®³à®µà®°à¯à®•à®³à¯ à®‰à®Ÿà®©à®Ÿà®¿à®¯à®¾à®• à®‡à®£à¯ˆà®•à¯à®• à®®à¯à®Ÿà®¿à®¯à¯à®®à¯, à®Žà®²à¯à®²à¯ˆà®¯à®±à¯à®± à®…à®±à®¿à®µà¯ˆà®ªà¯ à®ªà¯†à®± à®®à¯à®Ÿà®¿à®¯à¯à®®à¯. à®†à®©à®¾à®²à¯, à®¤à¯Šà®´à®¿à®²à¯à®¨à¯à®Ÿà¯à®ª à®µà®³à®°à¯à®šà¯à®šà®¿ à®¤à®©à®¿à®¯à¯à®°à®¿à®®à¯ˆ, à®ªà®¾à®¤à¯à®•à®¾à®ªà¯à®ªà¯ à®®à®±à¯à®±à¯à®®à¯ à®®à®©à®¿à®¤ à®‰à®±à®µà¯à®•à®³à¯ˆ à®ªà®±à¯à®±à®¿à®¯ à®•à¯‡à®³à¯à®µà®¿à®•à®³à¯ˆ à®Žà®´à¯à®ªà¯à®ªà¯à®•à®¿à®±à®¤à¯.",

    "à®’à®°à¯ à®¨à®²à¯à®² à®ªà¯à®¤à¯à®¤à®•à®®à¯ à®µà®¾à®šà®•à®°à¯à®•à®³à¯ˆ à®µà¯‡à®±à¯ à®‰à®²à®•à®¤à¯à®¤à®¿à®±à¯à®•à¯ à®…à®´à¯ˆà®¤à¯à®¤à¯à®šà¯ à®šà¯†à®²à¯à®²à¯à®®à¯ à®šà®•à¯à®¤à®¿à®¯à¯ˆ à®•à¯Šà®£à¯à®Ÿà¯à®³à¯à®³à®¤à¯. à®…à®¤à¯ à®’à®°à¯ à®šà¯à®µà®¾à®°à®¸à¯à®¯à®®à®¾à®© à®šà®¾à®•à®šà®®à®¾à®• à®‡à®°à¯à®•à¯à®•à®²à®¾à®®à¯, à®’à®°à¯ à®®à®©à®¤à¯ˆà®•à¯ à®•à®µà®°à¯à®®à¯ à®•à®¾à®¤à®²à¯ à®•à®¤à¯ˆà®¯à®¾à®• à®‡à®°à¯à®•à¯à®•à®²à®¾à®®à¯, à®…à®²à¯à®²à®¤à¯ à®†à®´à¯à®¨à¯à®¤ à®šà®¿à®¨à¯à®¤à®©à¯ˆà®¯à¯ˆ à®¤à¯‚à®£à¯à®Ÿà¯à®®à¯ à®ªà¯à®¤à¯à®¤à®•à®®à¯ à®†à®•à®²à®¾à®®à¯. à®µà®¾à®šà®¿à®ªà¯à®ªà®¿à®©à¯ à®®à¯‚à®²à®®à¯ à®®à®•à¯à®•à®³à¯ à®ªà¯à®¤à®¿à®¯ à®ªà®¾à®°à¯à®µà¯ˆà®•à®³à¯ˆ à®•à®£à¯à®Ÿà®±à®¿à®¯à®²à®¾à®®à¯, à®µà®¿à®¤à¯à®¤à®¿à®¯à®¾à®šà®®à®¾à®© à®ªà®£à¯à®ªà¯à®•à®³à¯ˆ à®ªà¯à®°à®¿à®¨à¯à®¤à¯à®•à¯Šà®³à¯à®³à®²à®¾à®®à¯, à®®à¯‡à®²à¯à®®à¯ à®•à®°à¯à®£à¯ˆ à®®à®¿à®•à¯à®¨à¯à®¤à®µà®°à¯à®•à®³à®¾à®• à®®à®¾à®±à®²à®¾à®®à¯. à®ªà¯à®¤à¯à®¤à®•à®™à¯à®•à®³à¯ à®µà¯†à®±à¯à®®à¯ à®Žà®´à¯à®¤à¯à®¤à¯à®•à®³à®¿à®©à¯ à®¤à¯Šà®•à¯à®ªà¯à®ªà®²à¯à®²; à®…à®µà¯ˆ à®•à®±à¯à®ªà®©à¯ˆà®•à¯à®•à®¾à®© à®•à®¤à®µà¯à®•à®³à¯.",

    "à®µà¯†à®±à¯à®±à®¿ à®Žà®ªà¯à®ªà¯‹à®¤à¯à®®à¯ à®¤à®¿à®±à®®à¯ˆà®¯à®¿à®²à¯à®®à¯ à®ªà¯à®¤à¯à®¤à®¿à®šà®¾à®²à®¿à®¤à¯à®¤à®©à®¤à¯à®¤à®¿à®²à¯à®®à¯ à®®à®Ÿà¯à®Ÿà¯à®®à®²à¯à®², à®†à®©à®¾à®²à¯ à®¤à¯€à®°à¯à®®à®¾à®©à®®à¯ à®®à¯à®•à¯à®•à®¿à®¯ à®ªà®™à¯à®•à¯ à®µà®•à®¿à®•à¯à®•à®¿à®±à®¤à¯. à®ªà®² à®šà®¿à®±à®¨à¯à®¤ à®šà®¾à®¤à®©à¯ˆà®¯à®¾à®³à®°à¯à®•à®³à¯ à®µà¯†à®±à¯à®±à®¿à®•à¯à®•à¯ à®®à¯à®©à¯à®©à®°à¯ à®ªà®² à®¤à¯‹à®²à¯à®µà®¿à®•à®³à¯ˆ à®…à®©à¯à®ªà®µà®¿à®¤à¯à®¤à¯à®³à¯à®³à®©à®°à¯. à®†à®©à®¾à®²à¯, à®…à®µà®°à¯à®•à®³à¯ˆ à®µà®¿à®¤à¯à®¤à®¿à®¯à®¾à®šà®ªà¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®µà®¤à¯ à®…à®µà®°à¯à®•à®³à®¿à®©à¯ à®®à®©à®µà®²à®¿à®®à¯ˆ à®®à®±à¯à®±à¯à®®à¯ à®šà¯†à®¯à®²à®¾à®±à¯à®±à¯à®®à¯ à®†à®±à¯à®±à®²à¯. à®•à®Ÿà¯à®®à¯ˆà®¯à®¾à®© à®‰à®´à¯ˆà®ªà¯à®ªà¯, à®ªà¯Šà®±à¯à®®à¯ˆ à®®à®±à¯à®±à¯à®®à¯ à®¨à¯‡à®°à¯à®®à®±à¯ˆà®¯à®¾à®© à®…à®£à¯à®•à¯à®®à¯à®±à¯ˆ à®Žà®¨à¯à®¤à®µà¯Šà®°à¯ à®šà®µà®¾à®²à¯ˆà®¯à¯à®®à¯ à®’à®°à¯ à®µà®¾à®¯à¯à®ªà¯à®ªà®¾à®• à®®à®¾à®±à¯à®± à®®à¯à®Ÿà®¿à®¯à¯à®®à¯. à®‡à®±à¯à®¤à®¿à®¯à®¿à®²à¯, à®®à¯à®¯à®±à¯à®šà®¿ à®šà¯†à®¯à¯à®¯à¯à®®à¯à®µà®°à¯à®•à®³à¯‡ à®‰à®£à¯à®®à¯ˆà®¯à®¾à®• à®µà¯†à®±à¯à®±à®¿à®¯à®¾à®³à®°à¯à®•à®³à¯.",

    "à®•à¯à®Ÿà¯à®®à¯à®ªà®®à¯ à®Žà®©à¯à®ªà®¤à¯ à®µà®¾à®´à¯à®•à¯à®•à¯ˆà®¯à®¿à®©à¯ à®…à®Ÿà®¿à®ªà¯à®ªà®Ÿà¯ˆ. à®¨à®®à®•à¯à®•à®¾à®• à®Žà®ªà¯à®ªà¯‹à®¤à¯à®®à¯ à®•à®¾à®¤à¯à®¤à®¿à®°à¯à®•à¯à®•à¯à®®à¯ à®‰à®±à®µà¯à®•à®³à¯ à®•à¯à®Ÿà¯à®®à¯à®ªà®¤à¯à®¤à®¿à®²à¯ à®¤à®¾à®©à¯ à®‡à®°à¯à®•à¯à®•à®¿à®©à¯à®±à®©. à®šà®¨à¯à®¤à¯‹à®·à®®à®¾à®© à®¤à®°à¯à®£à®™à¯à®•à®³à¯ˆ à®ªà®•à®¿à®°à¯à®¨à¯à®¤à¯ à®•à¯Šà®³à¯à®³à®µà¯à®®à¯, à®ªà®¿à®°à®šà¯à®šà®¿à®©à¯ˆà®•à®³à¯ˆ à®¤à¯€à®°à¯à®•à¯à®•à®µà¯à®®à¯ à®•à¯à®Ÿà¯à®®à¯à®ªà®®à¯ à®®à®¿à®•à®µà¯à®®à¯ à®…à®µà®šà®¿à®¯à®®à¯. à®Žà®¨à¯à®¤ à®šà¯‚à®´à¯à®¨à®¿à®²à¯ˆà®¯à®¿à®²à¯à®®à¯ à®•à¯à®Ÿà¯à®®à¯à®ªà®¤à¯à®¤à®¿à®©à®°à¯ à®†à®¤à®°à®µà®¾à®• à®‡à®°à¯à®¨à¯à®¤à®¾à®²à¯, à®µà®¾à®´à¯à®•à¯à®•à¯ˆà®¯à®¿à®©à¯ à®Žà®¨à¯à®¤ à®šà®µà®¾à®²à¯ˆà®¯à¯à®®à¯ à®Žà®¤à®¿à®°à¯à®•à¯Šà®³à¯à®³ à®®à¯à®Ÿà®¿à®¯à¯à®®à¯.",

    "à®¨à®£à¯à®ªà®°à¯à®•à®³à¯ à®µà®¾à®´à¯à®•à¯à®•à¯ˆà®¯à®¿à®©à¯ à®’à®°à¯à®ªà®•à¯à®¤à®¿ à®®à®Ÿà¯à®Ÿà¯à®®à®²à¯à®², à®…à®¤à¯ à®’à®°à¯ à®šà®•à¯à®¤à®¿. à®‰à®£à¯à®®à¯ˆà®¯à®¾à®© à®¨à®£à¯à®ªà®°à¯à®•à®³à¯ à®‰à®™à¯à®•à®³à¯ à®®à®•à®¿à®´à¯à®šà¯à®šà®¿à®¯à®¿à®²à¯ à®šà®¿à®°à®¿à®•à¯à®•à®¿à®±à®¾à®°à¯à®•à®³à¯, à®†à®©à®¾à®²à¯ à®‰à®™à¯à®•à®³à¯ à®¤à¯à®•à¯à®•à®¤à¯à®¤à®¿à®²à¯ à®‰à®™à¯à®•à®³à¯ˆ à®†à®±à¯à®±à¯à®ªà¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®•à®¿à®±à®¾à®°à¯à®•à®³à¯. à®¨à®Ÿà¯à®ªà®¿à®©à¯ à®†à®´à®®à®¾à®© à®‰à®±à®µà¯ à®µà®¾à®´à¯à®•à¯à®•à¯ˆà®¯à¯ˆ à®®à®•à®¿à®´à¯à®šà¯à®šà®¿à®¯à®¾à®• à®®à®¾à®±à¯à®±à¯à®•à®¿à®±à®¤à¯. à®¨à®£à¯à®ªà®°à¯à®•à®³à¯ à®‡à®²à¯à®²à®¾à®¤ à®µà®¾à®´à¯à®•à¯à®•à¯ˆ, à®µà®£à¯à®£à®®à®¿à®²à¯à®²à®¾ à®“à®µà®¿à®¯à®®à¯à®ªà¯‹à®²à¯ à®‡à®°à¯à®•à¯à®•à¯à®®à¯.",

    "à®®à®´à¯ˆ à®µà®°à¯à®®à¯ à®ªà¯‹à®¤à¯, à®ªà¯‚à®®à®¿ à®¤à®©à¯ à®®à®£à®®à¯‚à®Ÿà¯à®Ÿà¯à®®à¯. à®ªà¯à®¤à®¿à®¯ à®µà®¾à®´à¯à®•à¯à®•à¯ˆà®¯à¯ˆ à®¤à®°à¯à®®à¯ à®®à®´à¯ˆà®¤à¯à®¤à¯à®³à®¿à®•à®³à¯ à®šà¯†à®Ÿà®¿à®•à®³à¯à®•à¯à®•à¯ à®ªà¯à®¤à¯à®¤à¯à®¯à®¿à®°à¯ à®•à¯Šà®Ÿà¯à®•à¯à®•à¯à®®à¯. à®•à¯à®´à®¨à¯à®¤à¯ˆà®•à®³à¯ à®®à®´à¯ˆà®¯à®¿à®²à¯ à®†à®Ÿà®¿ à®®à®•à®¿à®´à¯à®µà®¤à¯ˆ à®•à®¾à®£ à®®à®¿à®•à®µà¯à®®à¯ à®…à®´à®•à®¾à®• à®‡à®°à¯à®•à¯à®•à¯à®®à¯. à®®à®´à¯ˆà®ªà¯Šà®´à®¿à®µà¯ à®®à®©à®¿à®¤ à®®à®©à®¤à®¿à®±à¯à®•à¯ à®ªà¯à®¤à¯à®¤à¯à®£à®°à¯à®šà¯à®šà®¿ à®…à®³à®¿à®•à¯à®•à®¿à®±à®¤à¯.",

    "à®µà®¾à®´à¯à®•à¯à®•à¯ˆ à®’à®°à¯ à®ªà®¯à®£à®®à¯, à®‡à®¤à®¿à®²à¯ à®à®±à¯à®±à®¤à¯ à®¤à®¾à®´à¯à®µà¯à®•à®³à¯ à®‡à®¯à®²à¯à®ªà®¾à®©à®µà¯ˆ. à®’à®µà¯à®µà¯Šà®°à¯ à®ªà¯‹à®°à®¾à®Ÿà¯à®Ÿà®¤à¯à®¤à®¿à®²à¯à®®à¯ à®’à®°à¯ à®ªà®¾à®Ÿà®®à¯ à®‰à®³à¯à®³à®¤à¯, à®…à®¤à¯ à®Žà®™à¯à®•à®³à¯ˆ à®®à¯‡à®²à¯à®®à¯ à®…à®±à®¿à®µà®¾à®³à®¿à®•à®³à®¾à®• à®®à®¾à®±à¯à®±à¯à®®à¯. à®šà®µà®¾à®²à¯à®•à®³à¯ˆ à®šà®¨à¯à®¤à®¿à®•à¯à®• à®¤à®¯à®™à¯à®•à®¾à®¤à¯€à®°à¯à®•à®³à¯, à®…à®µà¯ˆ à®‰à®™à¯à®•à®³à¯ˆ à®µà¯†à®±à¯à®±à®¿à®¯à®¿à®©à¯ à®ªà®¾à®¤à¯ˆà®¯à®¿à®²à¯ à®…à®´à¯ˆà®¤à¯à®¤à¯à®šà¯ à®šà¯†à®²à¯à®²à¯à®®à¯. à®µà®¾à®´à¯à®•à¯à®•à¯ˆà®¯à®¿à®©à¯ à®ªà®¾à®Ÿà®™à¯à®•à®³à¯ˆ à®ªà¯à®°à®¿à®¨à¯à®¤à¯ à®•à¯Šà®³à¯à®µà®¤à¯ à®®à®¿à®• à®®à¯à®•à¯à®•à®¿à®¯à®®à¯.",

    "à®…à®©à¯à®ªà¯ à®Žà®©à¯à®ªà®¤à¯ à®®à®©à®¿à®¤à®°à¯à®•à®³à¯ˆ à®‡à®£à¯ˆà®•à¯à®•à¯à®®à¯ à®’à®°à¯ à®šà®•à¯à®¤à®¿. à®…à®¤à¯ à®®à®Ÿà¯à®Ÿà¯à®®à¯‡ à®‰à®²à®•à®¿à®²à¯ à®šà®®à®¾à®¤à®¾à®©à®¤à¯à®¤à¯ˆà®¯à¯à®®à¯, à®®à®•à®¿à®´à¯à®šà¯à®šà®¿à®¯à¯ˆà®¯à¯à®®à¯ à®•à¯Šà®£à¯à®Ÿà¯à®µà®° à®®à¯à®Ÿà®¿à®¯à¯à®®à¯. à®’à®µà¯à®µà¯Šà®°à¯ à®¨à®¾à®³à¯à®®à¯, à®¨à¯€à®™à¯à®•à®³à¯ à®’à®°à¯à®µà®°à¯à®•à¯à®•à¯ à®’à®°à¯ à®¨à®²à¯à®² à®µà®¾à®°à¯à®¤à¯à®¤à¯ˆ à®šà¯Šà®©à¯à®©à®¾à®²à¯, à®…à®¤à¯ à®…à®µà®°à®¿à®©à¯ à®®à¯à®´à¯ à®¨à®¾à®³à¯ˆà®¯à¯à®®à¯ à®®à®•à®¿à®´à¯à®šà¯à®šà®¿à®¯à®¾à®• à®®à®¾à®±à¯à®±à¯à®®à¯. à®¨à®®à¯ à®šà¯Šà®±à¯à®•à®³à¯ à®®à®±à¯à®±à®µà®°à¯à®•à®³à®¿à®©à¯ à®®à®©à®¨à®¿à®²à¯ˆà®¯à¯ˆ à®¤à¯€à®°à¯à®®à®¾à®©à®¿à®•à¯à®•à¯à®®à¯ à®Žà®©à¯à®ªà®¤à®¾à®²à¯ à®…à®µà®±à¯à®±à¯ˆ à®•à®µà®©à®®à®¾à®• à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤ à®µà¯‡à®£à¯à®Ÿà¯à®®à¯.",

    "à®šà¯à®±à¯à®±à¯à®šà¯à®šà¯‚à®´à®²à¯ à®ªà®¾à®¤à¯à®•à®¾à®ªà¯à®ªà¯ à®®à®¿à®•à®µà¯à®®à¯ à®®à¯à®•à¯à®•à®¿à®¯à®®à¯. à®¨à®¾à®®à¯ à®‡à®¯à®±à¯à®•à¯ˆà®¯à¯ˆ à®ªà®¾à®¤à¯à®•à®¾à®•à¯à®•à®¾à®®à®²à¯ à®‡à®°à¯à®¨à¯à®¤à®¾à®²à¯, à®Žà®¤à®¿à®°à¯à®•à®¾à®²à®®à¯ à®®à®¿à®• à®®à¯‹à®šà®®à®¾à®• à®‡à®°à¯à®•à¯à®•à¯à®®à¯. à®®à®°à®™à¯à®•à®³à¯ˆ à®¨à®Ÿà¯à®™à¯à®•à®³à¯, à®ªà®šà¯à®®à¯ˆà®¯à¯ˆ à®µà®³à®°à¯à®™à¯à®•à®³à¯, à®‡à®¯à®±à¯à®•à¯ˆà®¯à¯à®Ÿà®©à¯ à®‡à®£à¯ˆà®¨à¯à®¤à¯ à®µà®¾à®´à¯à®™à¯à®•à®³à¯. à®¨à®®à®¤à¯ à®ªà¯‚à®®à®¿à®¯à¯ˆ à®ªà®¾à®¤à¯à®•à®¾à®ªà¯à®ªà®¤à¯ à®Žà®™à¯à®•à®³à¯ à®•à®Ÿà®®à¯ˆ."
];

function getRandomParagraph() {
    return paragraphs[Math.floor(Math.random() * paragraphs.length)];
}

console.log(getRandomParagraph());

let selectedParagraph = "";
const backgroundText = document.getElementById("background-text");
const inputBox = document.getElementById("typing-input");
const timerDisplay = document.getElementById("timer-display");
const timerSelect = document.getElementById("timer-select");
const startButton = document.getElementById("start-button");

let startTime = null;
let totalTyped = 0;
let correctTyped = 0;
let countdown = 0;
let timer = null; // Keep only one timer declaration
let timeLeft = 10; // Default time (changeable)
let isRunning = false; // Track if timer is running



function updateBackgroundText() {
    let userText = inputBox.value;
    let formattedText = "";
    let cleanedUserText = userText.replace(/\s+/g, ''); // Remove spaces for comparison
    let cleanedParagraph = selectedParagraph.replace(/\s+/g, '');

    // â³ Start the timer ONLY when the user types the first character
    if (!startTime && cleanedUserText.length > 0) {
        startTime = new Date().getTime();
        if (!isRunning) {
            isRunning = true;
            startTimer();  // ðŸ”¥ Start the timer when the first character is typed
        }
    }

    let inputIndex = 0;
    for (let i = 0; i < selectedParagraph.length; i++) {
        if (selectedParagraph[i] === " ") {
            formattedText += " ";
        } else {
            if (inputIndex < cleanedUserText.length) {
                totalTyped++;
                if (cleanedUserText[inputIndex] === cleanedParagraph[inputIndex]) {
                    formattedText += `<span class="correct">${selectedParagraph[i]}</span>`;
                    correctTyped++;
                } else {
                    formattedText += `<span class="incorrect">${selectedParagraph[i]}</span>`;
                }
                inputIndex++;
            } else {
                formattedText += selectedParagraph[i];
            }
        }
    }

    backgroundText.innerHTML = formattedText;
    inputBox.setSelectionRange(userText.length, userText.length);

    // âœ… If user finishes typing before time runs out, stop the timer and show results
    if (cleanedUserText === cleanedParagraph) {
        clearInterval(timer);
        const currentTime = new Date().getTime();
        const timeTaken = startTime ? Math.floor((currentTime - startTime) / 1000) : 0;
        endTest(true, timeTaken);
    }
}
// Preload the beep sound
const beep = new Audio("beep3.mp3");
beep.load();


timerSelect.addEventListener("change", function () {
    let newTime = parseInt(timerSelect.value);

    if (!isRunning) {
        // If the test has not started, update countdown
        countdown = newTime;
        timerDisplay.innerText = `Time: ${countdown}s`;
    } else {
        // âš ï¸ Do NOT restart the timer if the test is running!
        let timeElapsed = parseInt(timerSelect.getAttribute("data-start-time")) || 0;
        let remainingTime = newTime - timeElapsed;
        
        if (remainingTime > 0) {
            countdown = remainingTime;
            timerDisplay.innerText = `Time: ${countdown}s`;
        }
    }
});


function startTimer() {
    if (timer) clearInterval(timer); // ðŸš€ Prevent multiple timers
    timer = setInterval(() => {
        countdown--;
        timerDisplay.innerText = `Time: ${countdown}s`;

        if (countdown === 4) {
            beep.currentTime = 0;
            beep.play().catch(error => console.error("Audio play failed:", error));
        }

        if (countdown <= 0) {
            clearInterval(timer);
            endTest();
        }
    }, 1000);
}

function startTest() {
    selectedParagraph = getRandomParagraph();
    backgroundText.innerHTML = selectedParagraph;

    countdown = parseInt(timerSelect.value);
    timerDisplay.innerText = `Time: ${countdown}s`;
    inputBox.value = "";
    totalTyped = 0;
    correctTyped = 0;
    startTime = null;
    inputBox.disabled = false;
    inputBox.focus();
    updateBackgroundText();

    startButton.disabled = true;
    isRunning = false; // Make sure typing starts the timer, not button press
}
function calculateAccuracy() {
    let userText = inputBox.value;
    let totalTyped = userText.length;
    let correctTyped = 0;

    for (let i = 0; i < totalTyped; i++) {
        if (userText[i] === selectedParagraph[i]) {
            correctTyped++;
        }
    }

    let accuracy = totalTyped > 0 ? (correctTyped / totalTyped) * 100 : 0;
    return accuracy.toFixed(2); // Limit to 2 decimal places
}


function endTest(completed = false, timeTaken = null) {
    inputBox.disabled = true;
    clearInterval(timer);

    const currentTime = new Date().getTime();
    const elapsedTime = startTime ? (currentTime - startTime) / 60000 : 0; // Convert ms to minutes
    const wordCount = inputBox.value.trim().split(/\s+/).length;
    const wpm = elapsedTime > 0 ? Math.round(wordCount / elapsedTime) : 0;
    const accuracy = totalTyped > 0 ? Math.round((correctTyped / totalTyped) * 100) : 100;

    // **Fix:** Use the correct time taken when user finishes early
    const displayTimeTaken = completed ? `${timeTaken}s` : `${timerSelect.value}s`;

    // Play beep sound when test ends
    beep.currentTime = 0;
    beep.play().catch(error => console.error("Beep failed to play:", error));

    const popup = document.createElement("div");
    popup.id = "popup-message";
    popup.innerHTML = `
        <div class="popup-content">
            <h2>${completed ? "Congratulations! You finished typing!" : "Time's up!"}</h2>
            <p><strong>WPM:</strong> ${wpm}</p>
            <p><strong>Accuracy:</strong> ${accuracy}%</p>
            <p><strong>Time Taken:</strong> ${displayTimeTaken}</p>
            <button id="close-popup">OK</button>
        </div>
    `;

    document.body.appendChild(popup);

    document.getElementById("close-popup").addEventListener("click", () => {
        popup.remove();
        startButton.disabled = false;
    });

    startButton.disabled = false;
}


inputBox.addEventListener("input", updateBackgroundText);
startButton.addEventListener("click", startTest);

window.onload = () => {
    selectedParagraph = getRandomParagraph();
    backgroundText.innerHTML = selectedParagraph;
    inputBox.focus();
};
 
    </script>

</body>
</html>