<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kannada Keyboard Training</title>
    <style>
      body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #282c34;
    color: white;
    font-family: Arial, sans-serif;
}

.keyboard {
    display: grid;
    gap: 10px;
    padding: 20px;
    background: #1c1f26;
    border-radius: 10px;
    margin-bottom: 20px;
}

.gunitha-akshara { grid-template-columns: repeat(8, 60px); }
.gunitha-vatakshara { grid-template-columns: repeat(4, 60px); }

.key-container {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.key {
    width: 60px;
    height: 60px;
    background-color: #3b3f4a;
    color: white;
    font-size: 20px;
    font-weight: bold;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.2s;
}

.key textarea {
    width: 100%;
    height: 100%;
    background: transparent;
    border: none;
    color: white;
    font-size: 20px;
    font-weight: bold;
    text-align: center;
    resize: none;
}
.hidden { 
    display: none !important;  /* Force hiding */
    visibility: hidden;  /* Optional: Hide it visually */
}


.key:hover { background-color: #5a5e6e; }
.key:active { background-color: #777b8c; transform: scale(0.95); }
.key.pressed { background-color: green; }
.key.wrong { background-color: red; }

.label { font-size: 12px; color: #ccc; margin-top: 5px; }
.hidden { display: none; }  /* Change this dynamically if needed */

/* BUTTON FIX */
.button-container { 
    display: flex;
    justify-content: center;
    width: fit-content; /* Ensures it doesn‚Äôt stretch too much */
    margin-top: 10px; /* Adjust as needed */
}

#continueButton {
    align-items: center;
    background-image: linear-gradient(144deg, #af40ff, #5b42f3 50%, #00ddeb);
    border: 0;
    border-radius: 6px;
    box-shadow: rgba(151, 65, 252, 0.1) 0 4px 8px -3px;
    box-sizing: border-box;
    color: #ffffff;
    display: flex;
    font-size: 16px;
    justify-content: center;
    line-height: 1em;
    max-width: 100%;
    min-width: 130px;
    min-height: 38px;
    padding: 4px;
    text-decoration: none;
    user-select: none;
    -webkit-user-select: none;
    touch-action: manipulation;
    white-space: nowrap;
    cursor: pointer;
    transition: all 0.3s;
}

#continueButton span {
    background: none;
    padding: 12px 20px;
    border-radius: 4px;
    width: 100%;
    height: 100%;
    transition: 300ms;
}

#continueButton:hover span {
    background: none;
}

#continueButton:active {
    transform: scale(0.97);
}
.popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.85);
    padding: 20px;
    border-radius: 10px;
    color: white;
    text-align: center;
    z-index: 1000;
    width: 300px;
    box-shadow: 0px 0px 15px rgba(255, 255, 255, 0.2);
}

.popup-content {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.popup p {
    font-size: 18px;
    margin-bottom: 15px;
}

.popup button {
    background: #00ddeb;
    border: none;
    padding: 10px 20px;
    color: white;
    font-size: 16px;
    cursor: pointer;
    border-radius: 5px;
    transition: 0.3s;
}

.popup button:hover {
    background: #5b42f3;
}
/* Initially hide the popup */
.popup.hidden {
    display: none;
}

/* Heading Styling */
.heading {
    font-size: 28px;
    font-weight: bold;
    color: white;
    margin-bottom: 20px;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 2px;
    padding: 10px 0;
}

/* Footer Styling */
#footer-container {
    width: 100%;
}

footer {
    background-color: rgba(128, 128, 128, 0.5);
    color: black;
    text-align: center;
    padding: 15px;
    position: fixed;
    bottom: 0;
    width: 100%;
    opacity: 0;
    backdrop-filter: blur(8px);
    font-size: 16px;
    transition: opacity 0.5s ease-in-out;
}
@media (max-width: 768px) {
    .keyboard {
        grid-template-columns: repeat(5, 50px); /* Adjust for smaller screens */
        gap: 8px;
        padding: 15px;
    }

    .gunitha-akshara { grid-template-columns: repeat(5, 50px); }
    .gunitha-vatakshara { grid-template-columns: repeat(3, 50px); }

    .key {
        width: 50px; /* Smaller key size */
        height: 50px;
        font-size: 18px;
    }

    .key textarea {
        font-size: 18px;
    }

    .popup {
        width: 90%; /* Make popup width flexible */
        max-width: 320px;
        padding: 15px;
    }

    #continueButton {
        min-width: 100px; /* Smaller button width */
        min-height: 36px;
        font-size: 14px;
    }
}

@media (max-width: 480px) {
    .keyboard {
        grid-template-columns: repeat(4, 45px); /* More compact layout */
    }

    .key {
        width: 45px;
        height: 45px;
        font-size: 16px;
    }

    .popup {
        width: 95%;
        max-width: 280px;
    }
}


    </style>
</head>
<body>
    
  <!-- Help Button -->
  <button class="faq-button" onclick="showHelp()">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
        <path d="M80 160c0-35.3 28.7-64 64-64h32c35.3 0 64 28.7 64 64v3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74V320c0 17.7 14.3 32 32 32s32-14.3 32-32v-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7V160c0-70.7-57.3-128-128-128H144C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"></path>
    </svg>
    <span class="tooltip">Need help</span>
</button>

<!-- Overlay -->
<div id="overlay" onclick="hideHelp()"></div>

<!-- Help Image Modal -->
<div id="helpImage" onclick="event.stopPropagation()">
    <button class="close-btn" onclick="hideHelp()">X</button>
    <img src="http://ka-naada.in/wp-content/uploads/2025/04/sticker2.jpg" alt="logo" style="width: 100%;">
</div>


    <!-- Load Header Here -->
    <div id="header-container"></div>
    <h1>‡≤ó‡≥Å‡≤£‡≤ø‡≤§‡≤æ‡≤ï‡≥ç‡≤∑‡≤∞ </h1> <!-- Added Heading here -->

    <div id="gunithaAkshara" class="keyboard gunitha-akshara"></div>
    <div id="gunithaVatakshara" class="keyboard gunitha-vatakshara"></div>
   

    <div class="button-container">
        <button id="continueButton" class="hidden">
            <span>Continue</span>
        </button>
    </div>
    <div id="popup" class="popup hidden">
        <div class="popup-content">
            <p>üéâ Stage 3 Completed! üéâ</p>
            <button id="popupCloseButton">OK</button>
        </div>
    </div>
    <div id="footer-container"></div>    





<script>
    document.addEventListener("copy", (event) => {
    event.preventDefault();
    alert("Copying content is disabled.");
});

document.addEventListener("paste", (event) => {
    event.preventDefault();
    alert("Pasting content is disabled.");
});

    // Function to check if all keys have been pressed
function checkCompletion() {
    const allGreen = [...document.querySelectorAll(".key")].every(key => key.classList.contains("pressed"));
    const continueButton = document.getElementById("continueButton");
    const popup = document.getElementById("popup");

    // Show or hide the continue button and popup based on the condition
    continueButton.style.display = allGreen ? "block" : "none";
    popup.style.display = allGreen ? "block" : "none";
}

// Function to show the popup
function showPopup() {
    const popup = document.getElementById("popup");
    popup.style.display = "block"; // Directly show the popup
}

// Function to hide the popup
function hidePopup() {
    const popup = document.getElementById("popup");
    popup.style.display = "none"; // Directly hide the popup
}

// Add event listener to close the popup when the close button is clicked
document.getElementById("popupCloseButton").addEventListener("click", hidePopup);

// Function to load external HTML components (header, footer)
function loadComponent(elementId, filePath) {
    fetch(filePath)
        .then(response => response.text())
        .then(data => {
            document.getElementById(elementId).innerHTML = data;
        })
        .catch(error => console.error('Error loading component:', error));
}

// Load header.html and footer.html
loadComponent("header-container", "header.html");
loadComponent("footer-container", "footer.html");

// Footer scroll effect
let lastScrollY = window.scrollY;

window.addEventListener("scroll", function () {
    let footer = document.querySelector("footer");
    let currentScrollY = window.scrollY;

    if (currentScrollY > lastScrollY) {
        // Show footer when scrolling down
        footer.style.opacity = "1";
    } else {
        // Hide footer when scrolling up
        footer.style.opacity = "0";
    }

    lastScrollY = currentScrollY;
});

// Show footer after 2 seconds on page load
setTimeout(() => {
    let footer = document.querySelector("footer");
    if (footer) {
        footer.style.opacity = "1";
    }
}, 1000);

// Function to show the help overlay
function showHelp() {
    document.getElementById("helpImage").style.display = "block";
    document.getElementById("overlay").style.display = "block";
}

// Function to hide the help overlay
function hideHelp() {
    document.getElementById("helpImage").style.display = "none";
    document.getElementById("overlay").style.display = "none";
}

function shuffleArray(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]]; // Swap elements
    }
}

// Convert object to an array, shuffle, and convert back to object
function shuffleObject(obj) {
    const entries = Object.entries(obj); // Convert object to array of [key, value] pairs
    console.log("Before shuffle:", entries); // Debugging: log before shuffle
    shuffleArray(entries); // Shuffle the array
    console.log("After shuffle:", entries); // Debugging: log after shuffle
    return Object.fromEntries(entries); // Convert the shuffled array back to an object
}

const gunithaAkshara = {
    '‡≤ï': '‡≤ï',
    '‡≤ï‡≤æ': '‡≤ï + ‚áß + ‡≤Ü', 
    '‡≤ï‡≤ø': '‡≤ï + ‚áß + ‡≤á', 
    '‡≤ï‡≥Ä': '‡≤ï + ‚áß + ‡≤à', 
    '‡≤ï‡≥Å': '‡≤ï + ‚áß + ‡≤â',
    '‡≤ï‡≥Ç': '‡≤ï + ‚áß + ‡≤ä', 
    '‡≤ï‡≥É': '‡≤ï + ‚áß + ‡≤ã',
    '‡≤ï‡≥Ü': '‡≤ï + ‚áß + ‡≤é',
    '‡≤ï‡≥á': '‡≤ï + ‚áß + ‡≤è',
    '‡≤ï‡≥à': '‡≤ï + ‚áß + ‡≤ê',
    '‡≤ï‡≥ä': '‡≤ï + ‚áß + ‡≤í', 
    '‡≤ï‡≥ã': '‡≤ï + ‚áß + ‡≤ì', 
    '‡≤ï‡≥å': '‡≤ï + ‚áß + ‡≤î',
    '‡≤ï‡≤Ç': '‡≤ï + ‚áß + ‡≤Ö‡≤Ç', 
    '‡≤ï‡≤É': '‡≤ï + ‚áß + ‡≤Ö‡≤É', 
    '‡≤ï‡≥ç': '‡≤ï + ‡≥ç + ‡≤ï'
};

const gunithaVatakshara = {
    '‡≤ï‡≥ç‡≤ï': '‡≤ï + ‡≥ç + ‡≤ï = ‡≤ï‡≥ç‡≤ï',
    '‡≤ï‡≥ç‡≤ñ': '‡≤ï + ‡≥ç + ‡≤ñ = ‡≤ï‡≥ç‡≤ñ',
    '‡≤ï‡≥ç‡≤ó': '‡≤ï + ‡≥ç + ‡≤ó = ‡≤ï‡≥ç‡≤ó',
    '‡≤ï‡≥ç‡≤ò': '‡≤ï + ‡≥ç + ‡≤ò = ‡≤ï‡≥ç‡≤ò',
    '‡≤ï‡≥ç‡≤ö': '‡≤ï + ‡≥ç + ‡≤ö = ‡≤ï‡≥ç‡≤ö',
    '‡≤ï‡≥ç‡≤õ': '‡≤ï + ‡≥ç + ‡≤õ = ‡≤ï‡≥ç‡≤õ',
    '‡≤ï‡≥ç‡≤ú': '‡≤ï + ‡≥ç + ‡≤ú = ‡≤ï‡≥ç‡≤ú',
    '‡≤ï‡≥ç‡≤ù': '‡≤ï + ‡≥ç + ‡≤ù = ‡≤ï‡≥ç‡≤ù'
};


// Shuffling the objects
const shuffledGunithaAkshara = shuffleObject(gunithaAkshara);
const shuffledGunithaVatakshara = shuffleObject(gunithaVatakshara);

// Logging the shuffled objects
console.log("Shuffled gunithaAkshara:", shuffledGunithaAkshara);
console.log("Shuffled gunithaVatakshara:", shuffledGunithaVatakshara);
// Function to generate the keyboard UI
function generateKeyboard(id, letters, columns, isVatakshara = false) {
    const container = document.getElementById(id);
    container.innerHTML = "";
    container.style.gridTemplateColumns = `repeat(${columns}, 60px)`;

    Object.keys(letters).forEach((randomLetter) => {
        const keyContainer = document.createElement("div");
        keyContainer.classList.add("key-container");

        const keyDiv = document.createElement("div");
        keyDiv.classList.add("key");

        const textarea = document.createElement("textarea");
        textarea.setAttribute("data-value", randomLetter);
        textarea.setAttribute("placeholder", randomLetter);
        keyDiv.appendChild(textarea);

        const label = document.createElement("span");
        label.classList.add("label");
        label.textContent = isVatakshara ? `‡≤í‡≤§‡≥ç‡≤§‡≤ø ${letters[randomLetter].split('=')[0].trim()}` : `‡≤í‡≤§‡≥ç‡≤§‡≤ø  ${letters[randomLetter]}`;

        keyContainer.appendChild(keyDiv);
        keyContainer.appendChild(label);
        container.appendChild(keyContainer);
    });

    addInputListeners();
}

// Add input event listeners
function addInputListeners() {
    const textareas = document.querySelectorAll(".key textarea");

    textareas.forEach((textarea, index) => {
        textarea.addEventListener("input", () => {
            const expectedValue = textarea.getAttribute("data-value").trim();
            const enteredValue = textarea.value.trim();

            // Check if the input is empty
            if (enteredValue === "") {
                textarea.parentElement.classList.remove("pressed", "wrong");
            } 
            // Check if the input matches the expected value
            else if (enteredValue === expectedValue) {
                textarea.parentElement.classList.add("pressed");
                textarea.parentElement.classList.remove("wrong");

                // Move focus to the next field if there is one
                if (index < textareas.length - 1) {
                    textareas[index + 1].focus();
                }
            } 
            // If the input is incorrect
            else {
                textarea.parentElement.classList.add("wrong");
                textarea.parentElement.classList.remove("pressed");
            }

            checkAllInputsCorrect();
        });

        // Run check on keyup as well
        textarea.addEventListener("keyup", checkAllInputsCorrect);
    });

    // Ensure button is hidden initially
    document.getElementById("continueButton").classList.add("hidden");
}

// Function to check if all inputs are correct
function checkAllInputsCorrect() {
    const textareas = document.querySelectorAll(".key textarea");
    let allCorrect = true;

    textareas.forEach(textarea => {
        const expectedValue = textarea.getAttribute("data-value").trim();
        const enteredValue = textarea.value.normalize().trim(); // Normalize input to avoid hidden issues

        if (enteredValue !== expectedValue) {
            allCorrect = false;
        }
    });

     // Show or hide the continue button based on correctness
     const continueButton = document.getElementById("continueButton");
    if (allCorrect) {
        continueButton.classList.remove("hidden");
    } else {
        continueButton.classList.add("hidden");
    }
}

// Event listener for DOMContentLoaded to initialize everything
document.addEventListener("DOMContentLoaded", function () {
    generateKeyboard("gunithaAkshara", shuffledGunithaAkshara, 8);
    generateKeyboard("gunithaVatakshara", shuffledGunithaVatakshara, 4, true);

    document.getElementById("continueButton").addEventListener("click", function () {
        document.getElementById("popup").classList.remove("hidden"); // Show popup
    });

    document.getElementById("popupCloseButton").addEventListener("click", function () {
        window.location.href = "Kanada stage 4.html"; // Redirect after clicking OK
    });

    // Add reset functionality for the reset button
    document.getElementById("resetButton").addEventListener("click", function () {
        const keys = document.querySelectorAll(".key");

        keys.forEach(key => {
            // Remove the pressed and wrong classes to reset to the default gray color
            key.classList.remove("pressed");
            key.classList.remove("wrong");
        });

        // Reset all textareas to empty
        const textareas = document.querySelectorAll(".key textarea");
        textareas.forEach(textarea => {
            textarea.value = "";  // Clear the text
        });

        // Ensure the continue button is hidden again
        document.getElementById("continueButton").classList.add("hidden");
    });
});
</script>
</body>
</html>